!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).addToCalendar=e()}}(function(){return function(){return function e(t,n,r){function a(i,u){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[i]={exports:{}};t[i][0].call(f.exports,function(e){return a(t[i][1][e]||e)},f,f.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}}()({1:[function(e,t,n){t.exports=function(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage?navigator.userLanguage:navigator.language}},{}],2:[function(e,t,n){(function(e){var r,a;r=this,a=function(){"use strict";function n(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof e&&e.global===e?e:void 0,i=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,i){var u=o.URL||o.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):r(l.href)?n(e,t,i):a(l,l.target="_blank")):(l.href=u.createObjectURL(e),setTimeout(function(){u.revokeObjectURL(l.href)},4e4),setTimeout(function(){a(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,o){if(t=t||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),t);else if(r(e))n(e,t,o);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){a(i)})}}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,r);var i="application/octet-stream"===e.type,u=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&u)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},c.readAsDataURL(e)}else{var f=o.URL||o.webkitURL,s=f.createObjectURL(e);a?a.location=s:location.href=s,a=null,setTimeout(function(){f.revokeObjectURL(s)},4e4)}});o.saveAs=i.saveAs=i,void 0!==t&&(t.exports=i)},void 0!==n?a():(a(),r.FileSaver={})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var r=9007199254740991,a="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;var l,c,f=Object.prototype,s=f.hasOwnProperty,d=f.toString,v=f.propertyIsEnumerable,p=(l=Object.keys,c=Object,function(e){return l(c(e))}),g=Math.max,y=!v.call({valueOf:1},"valueOf");function b(e,t){var n=j(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&O(e)}(e)&&s.call(e,"callee")&&(!v.call(e,"callee")||d.call(e)==a)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!s.call(e,i)||o&&("length"==i||m(i,r))||n.push(i);return n}function h(e,t,n){var r=e[t];s.call(e,t)&&E(r,n)&&(n!==undefined||t in e)||(e[t]=n)}function m(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}function w(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||f)}function E(e,t){return e===t||e!=e&&t!=t}var j=Array.isArray;function O(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=_(e)?d.call(e):"";return t==o||t==i}(e)}function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var T=function(e){return t=function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:undefined,i=a>2?n[2]:undefined;for(o=e.length>3&&"function"==typeof o?(a--,o):undefined,i&&function(e,t,n){if(!_(n))return!1;var r=typeof t;return!!("number"==r?O(n)&&m(t,n.length):"string"==r&&t in n)&&E(n[t],e)}(n[0],n[1],i)&&(o=a<3?undefined:o,a=1),t=Object(t);++r<a;){var u=n[r];u&&e(t,u,r,o)}return t},n=g(n===undefined?t.length-1:n,0),function(){for(var e=arguments,r=-1,a=g(e.length-n,0),o=Array(a);++r<a;)o[r]=e[n+r];r=-1;for(var i=Array(n+1);++r<n;)i[r]=e[r];return i[n]=o,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(t,this,i)};var t,n}(function(e,t){if(y||w(t)||O(t))!function(e,t,n,r){n||(n={});for(var a=-1,o=t.length;++a<o;){var i=t[a],u=r?r(n[i],e[i],i,n,e):undefined;h(n,i,u===undefined?e[i]:u)}}(t,function(e){return O(e)?b(e):function(e){if(!w(e))return p(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}(t),e);else for(var n in t)s.call(t,n)&&h(e,n,t[n])});t.exports=T},{}],4:[function(e,t,n){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var r=9007199254740991,a="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;var l,c,f=Object.prototype,s=f.hasOwnProperty,d=f.toString,v=f.propertyIsEnumerable,p=(l=Object.keys,c=Object,function(e){return l(c(e))});function g(e,t){var n=h(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&m(e)}(e)&&s.call(e,"callee")&&(!v.call(e,"callee")||d.call(e)==a)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!s.call(e,i)||o&&("length"==i||b(i,r))||n.push(i);return n}function y(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||f,t!==r)return p(e);var t,n,r,a=[];for(var o in Object(e))s.call(e,o)&&"constructor"!=o&&a.push(o);return a}function b(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}var h=Array.isArray;function m(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?d.call(e):"";return t==o||t==i}(e)}t.exports=function(e){return m(e)?g(e):y(e)}},{}],5:[function(e,t,n){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)})},{}],6:[function(e,t,n){String.prototype.startsWith||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(r){}return n}(),t={}.toString,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var r=n.length,a=String(e),o=a.length,i=arguments.length>1?arguments[1]:undefined,u=i?Number(i):0;u!=u&&(u=0);var l=Math.min(Math.max(u,0),r);if(o+l>r)return!1;for(var c=-1;++c<o;)if(n.charCodeAt(l+c)!=a.charCodeAt(c))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}()},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.autoLoad=n.createCalendar=void 0;var r=w(e("browser-locale"));e("nodelist-foreach-polyfill");var a=function(e){if(e&&e.__esModule)return e;var t=m();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}}n["default"]=e,t&&t.set(e,n);return n}(e("file-saver")),o=w(e("lodash.assign")),i=w(e("lodash.keys"));e("string.prototype.startswith");var u,l=w(e("./generators/ics")),c=w(e("./generators/google")),f=w(e("./generators/yahoo")),s=e("./generators/utils"),d=w(e("./translations/en")),v=w(e("./translations/cn")),p=w(e("./translations/de")),g=w(e("./translations/es")),y=w(e("./translations/fr")),b=w(e("./translations/jp")),h=w(e("./translations/ru"));function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function w(e){return e&&e.__esModule?e:{"default":e}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j={cn:(0,o["default"])({},d["default"],v["default"]),de:(0,o["default"])({},d["default"],p["default"]),en:d["default"],es:(0,o["default"])({},d["default"],g["default"]),fr:(0,o["default"])({},d["default"],y["default"]),jp:(0,o["default"])({},d["default"],b["default"]),ru:(0,o["default"])({},d["default"],h["default"])},O={iCalendar:"iCalendar",googleCalendar:"googleCalendar",outlook:"outlook",yahoo:"yahoo"},_=(E(u={},O.iCalendar,l["default"]),E(u,O.googleCalendar,c["default"]),E(u,O.outlook,l["default"]),E(u,O.yahoo,f["default"]),u),T=function(e,t,n){var a=function(e,t){var n={language:"auto",calendars:(0,i["default"])(O)},a=!1;"atcOverrides"in window&&(n=(0,o["default"])({},n,window.atcOverrides)),Array.prototype.filter.call(e.attributes,function(e){return e.name.startsWith("data-atc-")}).forEach(function(e){var t=e.name.replace("data-atc-","");"translations"===t?a=JSON.parse(e.value):n[t]=e.value}),t&&(n=(0,o["default"])({},n,t));var u=(0,r["default"])().substr(0,2);"auto"===n.language&&(n.language=u),n.language=j[n.language]?n.language:"en";var l=(0,o["default"])({},j[n.language],n.translations||{});return a&&(l=(0,o["default"])({},l,a)),n.translations=l,n}(e,t),u=document.createElement("ul");u.className="atcb-list";var c="";a.calendars.forEach(function(t){n=n||function(e){var t=e.querySelectorAll("var.atc_event");return Array.prototype.map.call(t,function(e){var t=e.querySelectorAll("var"),n={};return t.forEach(function(e){var t=e.className.replace("atc_","");n[t]=e.innerHTML}),n})}(e);var r=function(e,t,n,r){var a=""===n.id?"":'id="'.concat(n.id,"_").concat(r,'_link"'),o=e.translations[r];if((0,s.isIE)()>=10&&(r===O.outlook||r===O.iCalendar))return"<a ".concat(a,' class="atcb-item-link ').concat(r,"\" data-event='").concat(JSON.stringify(t),"'>").concat(o,"</a>");var i=_[r];if(!i)return i=l["default"],console.warn("Generator for '".concat(r,"' not found, will be used ics instead")),"";var u=i(t);return"<a ".concat(a,' class="atcb-item-link ').concat(r,'" href="').concat(u,'" target="_blank" rel="nofollow">').concat(o,"</a>")}(a,n,e,t);c+='<li class="atcb-item">'.concat(r,"</li>")}),u.innerHTML=c;var f=document.createElement("a");f.className="atcb-link",f.innerHTML=a.translations.buttonText,f.id=""===e.id?"":"".concat(e.id,"_link"),f.tabIndex=1,e.appendChild(f),e.appendChild(u)};n.createCalendar=T;var M=function(e){e.addEventListener("click",function(t){t.preventDefault();var n=JSON.parse(e.getAttribute("data-event"));!function(e){var t;if((0,s.isIE)()<11){var n=new MSBlobBuilder;n.append(e),t=n.getBlob("text/x-vCalendar;charset=utf8")}else t=new Blob([e]);a.saveAs(t,"event.ics")}((0,l["default"])(n))})},A=function(){var e=document.getElementsByClassName("addtocalendar");Array.prototype.forEach.call(e,function(e){T(e)}),document.querySelectorAll(".atcb-item-link[data-event]").forEach(M)};n.autoLoad=A,A()},{"./generators/google":8,"./generators/ics":10,"./generators/utils":11,"./generators/yahoo":12,"./translations/cn":13,"./translations/de":14,"./translations/en":15,"./translations/es":16,"./translations/fr":17,"./translations/jp":18,"./translations/ru":19,"browser-locale":1,"file-saver":2,"lodash.assign":3,"lodash.keys":4,"nodelist-foreach-polyfill":5,"string.prototype.startswith":6}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=e("./utils"),a=function(e){e=(0,r.convertEventParamsFromATC)(e[0]);var t=(0,r.formatTime)(e.start),n=(0,r.calculateEndTime)(e);return encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text=".concat(e.title||""),"&dates=".concat(t||"","/").concat(n||""),"&details=".concat(e.description||""),"&location=".concat(e.address||""),"&sprop=&sprop=name:"].join(""))};n["default"]=a},{"./utils":11}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r,a=(r=e("lodash.keys"))&&r.__esModule?r:{"default":r};
/** @license https://github.com/AddToCalendar/addtocalendar The MIT License (MIT) Copyright (c) 2015 AddToCalendar */
var o=function(e){e=e.map(function(e,t){return(0,a["default"])(e).map(function(n){var r=e[n];return"e[".concat(t,"][").concat(n,"]=").concat(encodeURIComponent(r))}).join("&")});var t=-(new Date).getTimezoneOffset().toString(),n=["utz=".concat(t),"uln=".concat(navigator.language),"vjs=".concat("1.5")].concat(e);return"https://".concat("addtocalendar.com/atc/","outlook?").concat(n.join("&"))};n["default"]=o},{"lodash.keys":4}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r,a=(r=e("./ics-atc"))&&r.__esModule?r:{"default":r},o=e("./utils");var i=function(e){if((0,o.isIE)()<10)return(0,a["default"])(e);e=(0,o.convertEventParamsFromATC)(e[0]);var t=(0,o.formatTime)(e.start),n=(0,o.calculateEndTime)(e),r=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(t||""),"DTEND:"+(n||""),"SUMMARY:"+(e.title||""),"DESCRIPTION:"+(e.description||""),"LOCATION:"+(e.address||""),"END:VEVENT","END:VCALENDAR"].join("\n");return(0,o.isIE)()?r:encodeURI("data:text/calendar;charset=utf8,".concat(r))};n["default"]=i},{"./ics-atc":9,"./utils":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isIE=n.convertEventParamsFromATC=n.calculateEndTime=n.formatTime=n.MS_IN_MINUTES=void 0;var r,a=(r=e("lodash.assign"))&&r.__esModule?r:{"default":r};n.MS_IN_MINUTES=6e4;var o=function(e){return e.toISOString().replace(/-|:|\.\d+/g,"")};n.formatTime=o;n.calculateEndTime=function(e){return e.end?o(e.end):o(new Date(e.start.getTime()+6e4*e.duration))};var i=function(e){return e&&"string"==typeof e&&(e=new Date(e)),e};n.convertEventParamsFromATC=function(e){var t=i(e.date_start),n=i(e.date_end);return(0,a["default"])({},e,{start:t,end:n})};n.isIE=function(){var e=document.createElement("input");return window.ActiveXObject===undefined?undefined:document.addEventListener?window.atob?e.dataset?11:10:9:8}},{"lodash.assign":3}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=e("./utils"),a=function(e){var t=(e=(0,r.convertEventParamsFromATC)(e[0])).end?(e.end.getTime()-e.start.getTime())/r.MS_IN_MINUTES:e.duration,n=(t<600?"0"+Math.floor(t/60):Math.floor(t/60)+"")+(t%60<10?"0"+t%60:t%60+""),a=(0,r.formatTime)(new Date(e.start-e.start.getTimezoneOffset()*r.MS_IN_MINUTES))||"";return encodeURI(["https://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(e.title||""),"&st="+a,"&dur="+(n||""),"&desc="+(e.description||""),"&in_loc="+(e.address||"")].join(""))};n["default"]=a},{"./utils":11}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"添加到日历"}},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"In den Kalender"}},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Add to Calendar",iCalendar:"iCalendar",googleCalendar:"Google Calendar",outlook:"Outlook",yahoo:"Yahoo! Calendar"}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Añadir al Calendario"}},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Ajouter au calendrier"}},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"カレンダーに追加"}},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Добавить в календарь"}},{}]},{},[7])(7)});